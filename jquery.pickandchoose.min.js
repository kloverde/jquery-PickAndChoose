/*
 * PickAndChoose v1.2
 * https://www.github.com/kloverde/jquery-PickAndChoose
 *
 * This software is licensed under the 3-clause BSD license.
 *
 * Copyright (c) 2016 Kurtis LoVerde
 * All rights reserved
 *
 * Donations:  https://paypal.me/KurtisLoVerde/6
 */

!function(e){"use strict";e.fn.pickAndChoose=function(t){function n(t){var n="PickAndChoose error in "+e(C).prop("id")+":  "+t;throw i.showErrors&&C.append(n),n}function l(t){for(var l=0;l<t.length;l++)for(var s=e(t[l]).text(),a=l+1;a<t.length;a++)if(s===e(t[a]).text()){var o=e(t).parent();n(o.prop("id")+" has duplicate key '"+s+"'")}}function s(t,l){for(var s=0;s<t.length;s++)for(var a=e(t[s]).text(),o=0;o<l.length;o++)if(a===e(l[o]).text()){var c=e(t[0]).parent(),d=e(l[0]).parent();n(c.prop("id")+" and "+d.prop("id")+" have the same key '"+a+"'")}}function a(t,a){if(i.createSelectElements){var o=i.unselectedItems,c=i.selectedItems;null!=o&&null!=c&&e.each(o,function(t,l){e.each(c,function(e,l){t===e&&n("settings.unselectedItems and settings.selectedItems have the same key '"+t+"'")})})}else{(null==t||0===t.length)&&n("Could not find '"+i.unselectedId+"'"),(null==a||0===a.length)&&n("Could not find '"+i.selectedId+"'");var o=t.find("option"),c=a.find("option");l(o),l(c),s(o,c)}}function o(t,l){var s=e("<option></option>").text(t),a="";return"string"==typeof l?s.prop("value",l):"object"==typeof l?s.prop("value",l.value):n("Invalid value type ("+typeof l+")"),void 0!=l.cssClass&&null!=l.cssClass&&(a=l.cssClass),s.addClass((null!=i.optionCssClass?i.optionCssClass:"")+" "+a),s}function c(){var t=null,n=null;i.createSelectElements||(t=e("#"+i.unselectedId),n=e("#"+i.selectedId)),a(t,n);var l=e("<div/>"),s=e("<div/>"),c=e("<div/>");i.createSelectElements&&(t=e("<select/>",{id:i.unselectedId,name:i.unselectedName}),null!=i.unselectedItems&&e.each(i.unselectedItems,function(e,n){t.append(o(e,n))}),n=e("<select/>",{id:i.selectedId,name:i.selectedName}),null!=i.selectedItems&&e.each(i.selectedItems,function(e,t){n.append(o(e,t))})),t.prop("multiple",!0),n.prop("multiple",!0),t.appendTo(l),n.appendTo(c);var f=e("<button/>",{text:i.buttonSelectText,type:"button"}),h=e("<button/>",{text:i.buttonSelectAllText,type:"button"}),b=e("<button/>",{text:i.buttonDeselectText,type:"button"}),v=e("<button/>",{text:i.buttonDeselectAllText,type:"button"});f.on("click",function(){d(p,t,n)}),h.on("click",function(){u(p,t,n)}),b.on("click",function(){d(r,n,t)}),v.on("click",function(){u(r,n,t)}),f.appendTo(s),h.appendTo(s),b.appendTo(s),v.appendTo(s),i.addCssClasses&&(C.addClass(i.containerClass),l.addClass(i.unselectedContainerClass),s.addClass(i.buttonContainerClass),c.addClass(i.selectedContainerClass),f.addClass(i.buttonSelectClass),h.addClass(i.buttonSelectAllClass),b.addClass(i.buttonDeselectClass),v.addClass(i.buttonDeselectAllClass)),C.append(l),C.append(s),C.append(c)}function d(t,n,l){var s=n.find("option:selected"),a=new Array(s.length),o=0;s.each(function(){var t=e(this),n=new Object;n.key=t.text(),n.value=t.val(),a[o++]=n,t.prop("selected",!i.unhighlightAfterMove),t.appendTo(l)}),"function"==typeof i.onChangeCallback&&a.length>0&&i.onChangeCallback(t,l,a)}function u(t,n,l){n.find("option").each(function(){e(this).prop("selected",!0)}),d(t,n,l)}var i=e.extend({addCssClasses:!0,containerClass:"pacContainer",unselectedContainerClass:"pacUnselectedContainer",selectedContainerClass:"pacSelectedContainer",buttonContainerClass:"pacButtonContainer",buttonSelectClass:"pacButtonSelect",buttonSelectAllClass:"pacButtonSelectAll",buttonDeselectClass:"pacButtonDeselect",buttonDeselectAllClass:"pacButtonDeselectAll",optionCssClass:null,buttonSelectText:">",buttonSelectAllText:">>",buttonDeselectText:"<",buttonDeselectAllText:"<<",createSelectElements:!0,unselectedId:"pacUnselectedItems",unselectedName:"pacUnselectedItems",selectedId:"pacSelectedItems",selectedName:"pacSelectedItems",unselectedItems:null,selectedItems:null,unhighlightAfterMove:!0,onChangeCallback:null,showErrors:!1},t),p="select",r="deselect",C=this;c()}}(jQuery);
